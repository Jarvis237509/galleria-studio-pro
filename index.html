<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galleria Studio Pro</title>
    <link rel="stylesheet" href="src/ui/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <header class="app-header">
            <div class="header-left">
                <button id="menu-btn" class="icon-btn">‚ò∞</button>
                <h1>Galleria Studio <span class="pro-badge">PRO</span></h1>
            </div>
            <div class="header-center">
                <button id="undo-btn" class="icon-btn" title="Undo (Ctrl+Z)" disabled>‚Ü©</button>
                <button id="redo-btn" class="icon-btn" title="Redo (Ctrl+Y)" disabled>‚Ü™</button>
            </div>
            <div class="header-right">
                <button id="my-projects-btn" class="secondary-btn" title="My Projects">
                    üìÅ My Projects
                </button>
                <button id="new-project-btn" class="primary-btn">
                    <span>+</span> New Project
                </button>
            </div>
        </header>

        <main class="workspace">
            <aside class="left-panel" id="left-panel">
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="templates">Templates</button>
                    <button class="tab-btn" data-tab="frames">Frames</button>
                    <button class="tab-btn" data-tab="lighting">Lighting</button>
                </div>

                <div class="tab-content active" id="tab-templates">
                    <div class="section">
                        <h3>AI Recommendation</h3>
                        <div class="ai-suggestion-card" id="ai-suggestion">
                            <div class="ai-icon">‚ú®</div>
                            <p>Upload artwork to get AI scene recommendations</p>
                        </div>
                    </div>
                    <div class="section">
                        <h3>Categories</h3>
                        <div class="category-list" id="template-categories"></div>
                    </div>
                    <div class="section">
                        <h3>Templates</h3>
                        <div class="template-grid" id="template-grid"></div>
                    </div>
                </div>

                <div class="tab-content" id="tab-frames">
                    <div class="section">
                        <h3>Frame Style</h3>
                        <div class="frame-grid" id="frame-grid"></div>
                    </div>
                    <div class="section">
                        <h3>Frame Properties</h3>
                        <div class="control-group">
                            <label>Width <span class="value">2.0 cm</span></label>
                            <input type="range" id="frame-width" min="0" max="100" value="20">
                        </div>
                        <div class="control-group">
                            <label>Depth <span class="value">1.5 cm</span></label>
                            <input type="range" id="frame-depth" min="0" max="50" value="15">
                        </div>
                        <div class="control-group">
                            <label>Colour</label>
                            <input type="color" id="frame-color" value="#ffffff">
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="tab-lighting">
                    <div class="section">
                        <h3>Light Source</h3>
                        <div class="light-position-control" id="light-position">
                            <div class="light-indicator" style="left: 50%; top: 20%;"></div>
                        </div>
                    </div>
                    <div class="section">
                        <h3>Lighting Properties</h3>
                        <div class="control-group">
                            <label>Intensity</label>
                            <input type="range" id="light-intensity" min="0" max="200" value="100">
                        </div>
                        <div class="control-group">
                            <label>Warmth</label>
                            <input type="range" id="light-warmth" min="2000" max="8000" value="4000">
                            <span class="value">4000K</span>
                        </div>
                    </div>
                    <div class="section">
                        <h3>Atmosphere</h3>
                        <div class="mood-presets" id="mood-presets"></div>
                    </div>
                </div>
            </aside>

            <section class="canvas-section">
                <div class="canvas-toolbar">
                    <div class="tool-group">
                        <button class="tool-btn active" data-tool="move">‚Üñ</button>
                        <button class="tool-btn" data-tool="scale">‚§¢</button>
                        <button class="tool-btn" data-tool="rotate">‚Üª</button>
                    </div>
                    <div class="tool-group">
                        <button class="tool-btn" id="zoom-out">-</button>
                        <span class="zoom-level" id="zoom-level">100%</span>
                        <button class="tool-btn" id="zoom-in">+</button>
                    </div>
                </div>
                <div class="canvas-container" id="canvas-container">
                    <canvas id="main-canvas"></canvas>
                    <div class="canvas-overlay" id="canvas-overlay">
                        <div class="upload-prompt" id="upload-prompt">
                            <div class="upload-icon">üñºÔ∏è</div>
                            <h3>Drop artwork here</h3>
                            <p>or click to browse</p>
                            <input type="file" id="artwork-input" accept="image/*" multiple hidden>
                        </div>
                    </div>
                </div>
            </section>

            <aside class="right-panel" id="right-panel">
                <div class="section">
                    <h3>Artwork Properties</h3>
                    <div class="control-group">
                        <label>Dimensions (cm)</label>
                        <div class="dimension-inputs">
                            <input type="number" id="artwork-width" value="60" min="1">
                            <span>√ó</span>
                            <input type="number" id="artwork-height" value="80" min="1">
                        </div>
                    </div>
                    <div class="control-group">
                        <label>Scale <span id="scale-value">100%</span></label>
                        <input type="range" id="artwork-scale" min="10" max="500" value="100">
                    </div>
                    <div class="control-group">
                        <label>Rotation <span id="rotation-value">0¬∞</span></label>
                        <input type="range" id="artwork-rotation" min="-180" max="180" value="0">
                    </div>
                </div>

                <div class="section">
                    <h3>AI Enhancement</h3>
                    <div class="ai-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="ai-bg-remove" checked>
                            <span>Background Removal</span>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="ai-perspective" checked>
                            <span>Perspective Correction</span>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="ai-color-enhance">
                            <span>Colour Enhancement</span>
                        </label>
                    </div>
                </div>
            </aside>
        </main>

        <footer class="export-bar">
            <!-- Batch Gallery -->
            <div class="batch-gallery" id="batch-gallery">
                <div class="batch-gallery-header">
                    <span>üìö Artworks (<span id="artwork-count">0</span>)</span>
                    <button id="clear-all-btn" class="batch-btn" title="Clear all">‚úï</button>
                </div>
                <div class="batch-gallery-list" id="batch-gallery-list"></div>
            </div>
            
            <div class="export-presets">
                <button class="preset-btn" data-preset="marketplace">üè™ Marketplace</button>
                <button class="preset-btn" data-preset="social">üì± Social</button>
                <button class="preset-btn" data-preset="portfolio">üìÅ Portfolio</button>
                <button class="preset-btn" data-preset="print">üñ®Ô∏è Print</button>
            </div>
            <button class="export-btn primary-btn large" id="export-btn">Export Pack ‚Üì</button>
        </footer>

        <dialog class="modal" id="export-modal">
            <div class="modal-content">
                <header class="modal-header">
                    <h2>Export Pack</h2>
                    <button class="close-btn" id="close-export">√ó</button>
                </header>
                <div class="export-options">
                    <div class="export-section">
                        <h3>Export Preset</h3>
                        <p id="export-preset-desc">Full resolution images optimized for online marketplaces</p>
                    </div>
                    <div class="export-section">
                        <h3>Included Sizes</h3>
                        <ul id="export-sizes-list" class="export-sizes">
                            <li>Hero (3000√ó2400px)</li>
                            <li>Square (1200√ó1200px)</li>
                            <li>Thumb (800√ó600px)</li>
                        </ul>
                    </div>
                    <div class="export-section">
                        <h3>Options</h3>
                        <label class="export-option">
                            <input type="checkbox" id="export-watermark">
                            <span>Add watermark</span>
                        </label>
                        <div id="watermark-text-group" class="watermark-group" style="display:none;margin-top:8px;">
                            <input type="text" id="export-watermark-text" placeholder="Your watermark text" style="width:100%;padding:8px;border-radius:4px;border:1px solid #444;background:#1a1a1a;color:#fff;">
                        </div>
                    </div>
                </div>
                <footer class="modal-footer">
                    <button class="secondary-btn" id="cancel-export">Cancel</button>
                    <button class="primary-btn" id="confirm-export">Export Pack ‚Üì</button>
                </footer>
            </div>
        </dialog>

        <!-- Projects Modal -->
        <dialog class="modal" id="projects-modal">
            <div class="modal-content" style="max-width: 600px;">
                <header class="modal-header">
                    <h2>My Projects</h2>
                    <button class="close-btn" id="close-projects">√ó</button>
                </header>
                <div class="projects-container" id="projects-container">
                    <!-- Projects will be rendered here -->
                </div>
                <footer class="modal-footer">
                    <div style="display:flex;gap:12px;align-items:center;flex:1;">
                        <input type="text" id="save-project-name" placeholder="Project name..." style="flex:1;padding:10px;border:1px solid #444;border-radius:6px;background:#1a1a24;color:#fff;">
                        <button class="secondary-btn" id="export-json-btn">Export JSON</button>
                        <label class="secondary-btn" style="cursor:pointer;">
                            Import JSON
                            <input type="file" id="import-json-input" accept=".json" hidden>
                        </label>
                    </div>
                    <button class="primary-btn" id="save-new-project-btn">üíæ Save Current</button>
                </footer>
            </div>
        </dialog>

        <div class="processing-overlay" id="processing-overlay">
            <div class="processing-content">
                <div class="spinner"></div>
                <h3 id="processing-text">Processing artwork...</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="src/core/State.js"></script>
    <script src="src/core/State.js"></script>
    <script src="src/core/CanvasEngine.js"></script>
    <script src="src/core/KeyboardShortcuts.js"></script>
    <script src="src/core/ProjectManager.js"></script>
    <script src="src/core/BatchProcessor.js"></script>
    <script src="src/templates/TemplateLibrary.js"></script>
    <script src="src/templates/TemplateRenderer.js"></script>
    <script src="src/frames/FrameSystem.js"></script>
    <script src="src/lighting/LightingEngine.js"></script>
    <script src="src/ai/AIProcessor.js"></script>
    <script src="src/export/ExportEngine.js"></script>
    <script src="src/ui/UIManager.js"></script>
    <script src="src/app.js"></script>
</body>
</html>